var player, tag = document.createElement("script"); tag.src = "https://www.youtube.com/iframe_api"; var firstScriptTag = document.getElementsByTagName("script")[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player_started = !1; function onYouTubeIframeAPIReady() { player = new YT.Player("player", { height: "95%", width: "95%", videoId: vid, host: "https://www.youtube-nocookie.com", playerVars: { controls: 0, showinfo: 1, autoplay: 0, autohide: 1, playsinline: 1, start: ts[lineNb] }, events: { onReady: onPlayerReady, onStateChange: onPlayerStateChange } }) } function onPlayerReady(e) { e.target.pauseVideo() } var paused = !0, done = !1; function onPlayerStateChange(e) { e.data != YT.PlayerState.PLAYING || done || (player_started = !0, iplaystop.classList.replace("fa-play", "fa-stop"), timeout = setTimeout(stopVideo, timeouts[lineNb]), done = !0, paused = !1), e.data != YT.PlayerState.PAUSED || done || (iplaystop.classList.replace("fa-stop", "fa-play"), done = !1, paused = !0) } function stopVideo() { player_started && (player.pauseVideo(), done = !1) }
