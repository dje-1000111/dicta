(()=>{var e={344:()=>{document.getElementById("subh"),document.querySelector("main")&&document.querySelector("main"),document.addEventListener("dblclick",(function(){if(window.getSelection){var n=window.getSelection().toString(),i=[".",",",":",";","!","?","%","/","<",">","&","#",'"',"{","}","(",")","@","[","]","â­"];for(char of n)i.includes(char)&&(n=n.replace(char,""));n.length>0&&n.length<26?dictmod.show():n=""}!i.includes(n)&&n.length>0&&fetch(prde,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","X-CSRFToken":csrftoken},body:JSON.stringify(n)}).then((async i=>{if(!i.ok){const e=await i.text();throw new Error(e)}{var a=JSON.parse(i.headers.get("definition"));document.getElementById("dictionary-content")&&document.getElementById("dictionary-content").remove(),t.innerHTML="";let c=document.createElement("div");if(c.id="dictionary-content",divTitleContent=document.createTextNode(`${n.charAt(0).toUpperCase()+n.slice(1)}`),t.appendChild(divTitleContent),Object.keys(a).includes("no-result"))document.createElement("p"),pContent=document.createTextNode("No Definition found."),c.appendChild(pContent);else for(const[e,t]of Object.entries(a))if(Object.keys(t).length>0){(l=document.createElement("ul")).className="title";var l,o=document.createTextNode(`${e}`);(d=document.createElement("li")).appendChild(o),l.appendChild(d),c.appendChild(l),(l=document.createElement("ul")).className="def";for(const[e,n]of Object.entries(t)){let e=document.createTextNode(`${n}`);var d;(d=document.createElement("li")).appendChild(e),l.appendChild(d),c.appendChild(l)}}e.appendChild(c)}}))}));var e=document.getElementById("dictionary"),t=document.getElementById("dictionary-title")},779:()=>{const e=document.getElementById("blur");if(document.getElementById("blur-btn"))var t=document.getElementById("blur-btn"),n=document.getElementById("iblur");blurStatus=0,t&&(t.onclick=function(){0===blurStatus?(n.classList.replace("fa-droplet","fa-droplet-slash"),e.classList.add("blur-vid"),blurStatus=1):(n.classList.replace("fa-droplet-slash","fa-droplet"),e.classList.remove("blur-vid"),blurStatus=0)})},135:()=>{var e=document.getElementById("imgb64");if(document.getElementById("imgb64")){var t=function(e){var t,n,i,a={r:12.9,g:58.8,b:95.3},l=document.createElement("canvas"),o=l.getContext&&l.getContext("2d"),d=-4,c={r:0,g:0,b:0},r=0;if(!o)return a;n=l.height=e.naturalHeight||e.offsetHeight||e.height,t=l.width=e.naturalWidth||e.offsetWidth||e.width,o.drawImage(e,0,0);try{imageData=o.getImageData(0,0,t,n)}catch(e){return console.warn("Image not compatible"),a}for(i=imageData.data.length;(d+=20)<i;)++r,c.r+=imageData.data[d],c.g+=imageData.data[d+1],c.b+=imageData.data[d+2];return c.r=~~(c.r/r),c.g=~~(c.g/r),c.b=~~(c.b/r),c}(e);document.body.style.backgroundImage=`radial-gradient(#9d9d9d .5px, rgb(${t.r}, ${t.g}, ${t.b}) 1px)`,document.body.style.backgroundSize="60px 60px"}},818:()=>{document.querySelectorAll("input[type=radio][name=rate]").forEach((function(e){e.addEventListener("change",(function(t){t.preventDefault(),1==e.checked&&async function(e,t,n){try{const i=await fetch(e,{method:"POST",body:JSON.stringify(t),dataType:"json",headers:n});return await i.json()}catch(e){return console.warn(e)}}(aprr,{star_rating:t.target.value,dictation_id:t.target.id},{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":csrftoken})}))}))}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}(()=>{"use strict";n(344),n(779),n(135);var e=[],t=[];var i=document.getElementById("story-segment");function a(n){n=n.slice(0,-1);let a=document.createElement("li"),l=document.createElement("i");l.className="fa-solid fa-copy style='color: #a8bb24;'",window[`textline${counter}`]=document.createTextNode(n),a.appendChild(window[`textline${counter}`]),i.appendChild(a),t.push(n),window[`btn${lineNb}`]=document.createElement("button"),window[`btn${lineNb}`].className="btn",window[`btn${lineNb}`].id=`copy-${lineNb}`,window[`btn${lineNb}`].appendChild(l),a.appendChild(window[`btn${lineNb}`]),e.push(window[`btn${lineNb}`]),e.forEach((n=>{n.addEventListener("click",(function(i){!async function(e){try{await navigator.clipboard.writeText(e)}catch(e){return console.warn("Failed to copy: ",e)}}(t[e.indexOf(n)])}))}))}async function l(e,t,n){try{const i=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:n});return await i.json()}catch(e){return console.warn(e)}}const o={Accept:"application/json","Content-Type":"application/json","X-CSRFToken":csrftoken};if(document.getElementById("id_textarea"))var d=document.getElementById("id_textarea").value;var c=document.getElementById("counter"),r=document.getElementById("check"),s=document.getElementById("reveal"),u=document.getElementById("result_correction"),m=document.getElementById("lengthened"),p=0,b=!1,y=!1;const g=document.getElementById("tip");var f,h,v,w,N=0;function E(){!0===y&&(y=!1),m.setAttribute("data-tooltip","Check here to see the correction without contractions."),s.innerHTML=N?`<i class="fa-solid fa-${N} w-ctrl"></i>`:'<i class="fa-solid fa-0 w-ctrl"></i>';let e=document.getElementById("next");h&&!0===b?(u.innerHTML=v,w&&m.setAttribute("data-tooltip",w),u.classList.add("text-valid"),u.classList.remove("text-invalid"),!e&&lineNb<ts.length-2?(function(){(f=document.createElement("button")).className="btn btn-success",f.id="next";let e=document.createTextNode("Continue");f.appendChild(e),document.querySelector("#complete").appendChild(f)}(),f.onclick=function(){lineNb<ts.length-2&&!0===b&&(lineNb+=1,p=ts[lineNb],player.seekTo(p,!0),player.playVideo(),done=!1,document.getElementById("id_textarea").value="",b=!1,u.innerHTML="",N=0,s.innerHTML=N?`<i class="fa-solid fa-${N} w-ctrl"></i>`:'<i class="fa-solid fa-0 w-ctrl"></i>',c.innerHTML=lineNb,lines.push(lineNb-1),g.innerHTML=void 0!==tip[lineNb]?`<i class="fa-solid fa-lightbulb"></i> TIP: ${tip[lineNb]}`:g.innerHTML="",a(v),l(aptc,{lineNb,new_text:d,topicname,reveal_status:y,new_page:!0,dictation_id},o)),f.remove()}):lineNb==ts.length-2&&!0===b&&(lines.push(lineNb-1),u.innerHTML="This is the end, nice work, congrats! :)",a(v))):(u.classList.add("text-invalid"),u.classList.remove("text-valid"),u.innerHTML=h)}(r||s)&&[r,s].forEach((e=>{e.addEventListener("click",(function(t){var n=document.getElementById("id_textarea").value;y=e===s,l(aptc,{lineNb,new_text:n,topicname,reveal_status:y,new_page:!1,dictation_id},o).then((e=>{h=e.result,b=e.state,v=e.original,w=e.lengthened_verif,N=e.reveal_attempts,E()}))}))})),document.addEventListener("keydown",(e=>{if(e.ctrlKey&&(player&&player.seekTo(ts[lineNb],!0),window.clearTimeout(timeout),player.seekTo(ts[lineNb],!0),player.playVideo(),done=!1),"Enter"===e.key){e.preventDefault();let t=document.getElementById("id_textarea").value;l(aptc,{lineNb,new_text:t,topicname,reveal_status:y,new_page:!1,dictation_id},o).then((e=>{h=e.result,b=e.state,v=e.original,w=e.lengthened_verif,N=e.reveal_attempts,E()}))}})),n(818);const T=document.getElementById("previous"),I=document.getElementById("go-next"),x=document.getElementById("playstop"),L=document.getElementById("iplaystop"),_='<i class="fa-solid fa-lightbulb" style="color: #ffffff;"></i>';g.innerHTML=void 0!==tip[lineNb]?`${_} TIP: ${tip[lineNb]}`:g.innerHTML="",document.getElementById("playstop")&&x.addEventListener("click",(function(e){paused?(player.seekTo(ts[lineNb],!0),window.clearTimeout(timeout),player.playVideo(),done=!1,paused=!1):(player.pauseVideo(),paused=!0,L.classList.replace("fa-stop","fa-play"))})),document.getElementById("previous")&&T.addEventListener("click",(function(e){lineNb>=1&&(lineNb-=1),g.innerHTML=void 0!==tip[lineNb]?`${_}  TIP: ${tip[lineNb]}`:g.innerHTML="",player.seekTo(ts[lineNb],!0),counter.innerHTML=lineNb,lines.includes(lineNb)?create_level_valid():del_level_valid(),window.clearTimeout(timeout),player.seekTo(ts[lineNb],!0),player.playVideo(),done=!1,reveal.innerHTML='<i class="fa-solid fa-0 w-ctrl"></i>'})),document.getElementById("go-next")&&I.addEventListener("click",(function(e){lineNb<totl&&(lineNb+=1),g.innerHTML=void 0!==tip[lineNb]?`${_}  TIP: ${tip[lineNb]}`:g.innerHTML="",player.seekTo(ts[lineNb],!0),counter.innerHTML=lineNb,lines.includes(lineNb)?create_level_valid():del_level_valid(),window.clearTimeout(timeout),player.seekTo(ts[lineNb],!0),player.playVideo(),done=!1,reveal.innerHTML='<i class="fa-solid fa-0 w-ctrl"></i>'})),document.getElementById("previous")&&previous.addEventListener("click",(function(){lineNb>0&&i.lastElementChild&&i.removeChild(i.lastElementChild)}))})()})();